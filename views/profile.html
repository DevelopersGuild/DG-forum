{% extends "base.html" %}

{% block page %}
    <!--
    {% if user.username == sessUser.username %}

    then show Edit Profile stuff, else don't

    {% endif %}
    -->

    {% if user.username == sessUser.username %}
    <!-- EDITPROFILE -->
    <div class="profile">
      <div class="edit-profile">Edit Profile</div>
      <!-- NOTE: This route isn't configured yet. -->
			<form action="/changeprofile" method="post">
				<div class="fieldset">
					<div class="field">
						<label>Password</label>
						<input name="password" type="password" autocapitalize="off" maxlength="512" pattern=".{7,}" id="password3"autocomplete="password" placeholder="Password">
					</div>
					<div class="field">
		              	<label>Confirm password</label>
		              	<input name="password2" type="password" autocapitalize="off" required maxlength="512" pattern=".{7,}" id="password4" placeholder="Confirm password" onkeyup = "checkPass2(); return false;">
		            </div>
					<div class="field">
						<label>First name</label>
						<input name="fName" autocapitalize="off" maxlength="15" pattern=".{1,}" placeholder="{{ sessUser.profile.fName }}">
					</div>
					<div class="field">
						<label>Last name</label>
						<input name="lName" maxlength="15" pattern=".{1,}"autocapitalize="off" placeholder="{{ sessUser.profile.lName }}">
					</div>
					<div class="field">
						<label for="email">Email address</label>
						<input name="email" maxlength="254" pattern=".{5,}"autocapitalize="off" autocomplete="email-address" placeholder="{{ sessUser.email }}">
					</div>
					<div class="field">
						<label>Bio</label>
						<input name="bio" maxlength="2500" pattern=".{1,}" autocapitalize="off" placeholder="{{ sessUser.profile.bio }}">
					</div>
					<div class="field">
						<label>Website</label>
						<input name="website" maxlength="35" pattern=".{4,}"autocapitalize="off" placeholder="{{ sessUser.profile.website }}">
					</div>
					<div class="field">
						<label>Github name</label>
						<input name="githubName" maxlength="39" pattern=".{1,}"autocapitalize="off" placeholder="{{ sessUser.profile.githubName }}">
					</div>
					<div class="field-avatar">
						<label style="width:100%;">Avatar</label>

						<select id="mySelect" style="width:250px; display:none;" name="avatarSelect">
	    					{% for avatar in STOCKAVATARS %}
	      					<option value="{{loop.index}}" {% if avatar==sessUser.profile.avatar%}selected="selected"{% endif %}>{{loop.index}}</option>
	    					{% endfor %}
    					</select>

    					{% for avatar in STOCKAVATARS %}
    					<button type="button" class="avatar clickable {% if avatar==sessUser.profile.avatar %}button-clicked{% endif %}" onclick="selectAvatar( {{ loop.index }} )" style="background-image: url(../avatars/{{ avatar }}); background-color: white;"></button>
    					{% endfor %}

					</div>
					<input id="register-btn" class="btn" value="Save Changes" type="submit">
				</div>
			</form>
		</div>
		<!-- END EDITPROFILE -->

		{% else %}
		<div class="user-profile">
			<div class="avatar{% if user.flags.online %}-online{% endif %}" style="background-image: url(../avatars/{{ user.profile.avatar }});"></div>

			<div style="text-align:center; line-height:14px;"><a href="../user/{{ user.username }}" class="user-title{{ user.title }}">{{ user.username }}</a></div>

			{% if user.profile.fName %}
		    <div class="info-val" style="text-align:center; line-height:14px; font-style:italic;">{{ user.profile.fName }} {{ user.profile.lName }}</div>
		    {% endif %}

			{% if user.title != 0%}
  			<div class="banner banner{{ user.title }}" style="margin:0 auto; float:none; margin-top:.5em; margin-bottom:1em;">
  			{% if user.title == 1%}Member
  			{% elif user.title == 2%}Officer{% endif %}
  			</div>
			{% endif %}

			{% if user.flags.forumDev %}
			<div class="banner banner-forumDev" style="margin:0 auto; float:none;">Forum Dev</div>
	        {% endif %}

	        <div style="text-align:center; font-size:.9em; line-height:14px;">Last Active:<br>{{ convertToDate(user.lastActivity) }}</div>

	        <div style="margin-top:1em;">

		        {% if user.profile.website %}
		        <div class="info">Website</div>
		        <div class="info-val">{{ user.profile.website }}</div>
		        {% endif %}

		        {% if user.profile.github %}
		        <div class="info">Github</div>
		        <div class="info-val">{{ user.profile.github }}</div>
		        {% endif %}

		        {% if user.profile.bio %}
		        <div class="info">Bio</div>
		        <div class="info-val">{{ user.profile.bio }}</div>
		        {% endif %}
		    </div>
	    </div>

		{% endif %}

{% endblock %}
